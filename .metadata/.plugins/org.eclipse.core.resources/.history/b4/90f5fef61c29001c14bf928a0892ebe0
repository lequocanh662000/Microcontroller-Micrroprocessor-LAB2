/*
 * 8x8matrix_display.c
 *
 *  Created on: Oct 8, 2021
 *      Author: Dell
 */
#include "main.h"
#include "8x8matrix_display.h"
#define 	MAX_LED_MATRIX		8

//static uint8_t column_buffer[] = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};
//static uint8_t row_buffer[]    = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff};

uint8_t RowMatrix_buffer[8] = {0xff, 0x03, 0x01, 0xcc, 0xcc, 0x01, 0x03, 0xff};

 void updateLEDMatrix(int index){
	 	 	 GPIOB->ODR = 0xff;
	 switch (index){
	 	 case 0:
	 		 GPIOB->ODR = RowMatrix_buffer[0];
	 		 break;
	 	 case 1:
	 		 GPIOB->ODR = RowMatrix_buffer[1];
	 		 break;
	 	 case 2:
	 		 GPIOB->ODR = RowMatrix_buffer[2];
	 		 break;
	 	 case 3:
	 		 GPIOB->ODR = RowMatrix_buffer[3];
	 		 break;
	 	 case 4:
	 		 GPIOB->ODR = RowMatrix_buffer[4];
	 		 break;
	 	 case 5:
	 		 GPIOB->ODR = RowMatrix_buffer[5];
	 		 break;
	 	 case 6:
	 		GPIOB->ODR = RowMatrix_buffer[6];
	 		 break;
	 	 case 7:
	 		GPIOB->ODR = RowMatrix_buffer[7];
	 		 break;
	 	 default:
	 		 break;
	 }
 }

 void columnScan(int index){
	 switch (index){
	 	 	 case 0:
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_8_PORT, ENABLE_COL_8x8_8, RESET);
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_1_PORT, ENABLE_COL_8x8_1, SET);

	 	 		 break;
	 	 	 case 1:
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_1_PORT, ENABLE_COL_8x8_1, RESET);
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_2_PORT, ENABLE_COL_8x8_2, SET);

	 	 		 break;
	 	 	 case 2:
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_2_PORT, ENABLE_COL_8x8_2, RESET);
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_3_PORT, ENABLE_COL_8x8_3, SET);

	 	 		 break;
	 	 	 case 3:
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_3_PORT, ENABLE_COL_8x8_3, RESET);
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_4_PORT, ENABLE_COL_8x8_4, SET);

	 	 		 break;
	 	 	 case 4:
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_4_PORT, ENABLE_COL_8x8_4, RESET);
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_5_PORT, ENABLE_COL_8x8_5, SET);

	 	 		 break;
	 	 	 case 5:
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_5_PORT, ENABLE_COL_8x8_5, RESET);
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_6_PORT, ENABLE_COL_8x8_6, SET);

	 	 		 break;
	 	 	 case 6:
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_6_PORT, ENABLE_COL_8x8_6, RESET);
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_7_PORT, ENABLE_COL_8x8_7, SET);

	 	 		 break;
	 	 	 case 7:
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_7_PORT, ENABLE_COL_8x8_7, RESET);
	 	 		 HAL_GPIO_WritePin(ENABLE_COL_8x8_8_PORT, ENABLE_COL_8x8_8, SET);

	 	 		 break;
	 	 	 default:
	 	 		 break;
	 }
 }
